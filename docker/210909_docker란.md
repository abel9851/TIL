# docker란?

docker에서는 host os(내 컴퓨터의 os) 위에 도커 엔진이 올려지고 컨테이너(앱과 그 앱을 실행시키기 위한 bin, lib가 있음)가 올려지는  
형태로 구현된다.  

즉, 호스트의 커널을 공유한다.  
커널이 뭔지 찾아보자.  

커널이란 컴퓨터 전원이 켜질때 크기가 큰 OS가 전부 메모리에 올라가면 메모리의 용량을 낭비함으로  
필요한 부분만 메모리에 올라가 있는, 메모리에 상주하는 운영체제의 부분이 있는데  
이를 커널이라고 한다.  
운영체제의 핵심적인 부분이다.  
(OS의 나머지 부분은 필요로 해질때 메모리에 올라간다)

## docker 설치

설치는 docker docs에 가면 운영체제에 따라 설치 방법이 자세히 나와있다.  

참조:[도커 설치 - 윈도우](https://docs.docker.com/desktop/windows/install/)

## 볼륨이란?

도커 데이터 볼륨은 데이터를 컨테이너가 아닌,  
호스트에 저장하는 방식이다.  
따라서 데이터 볼륨은 컨테이너끼리 데이터를 공유할 때 활용할 수 있다.  

도커 컨테이너 안의 파일 변경 사항은 Union File System에 의해 관리된다.  
하지만 데이터 볼륨은 Union File System을 통하지 않고 바로 호스트에 저장된다.  
따라서 `docker commit` 명령을 통해 이미지로 생성해도 데이터 볼륨의 변경 사항은 이미지에 포함되지 않는다.  

도커 볼륨은 `docker volume create 이름`으로 생성할 수 있다.  

그리고 볼륨과 컨테이너를 연결할 때에는 마운트를 해줘야하는데  
아래와 같이  
:(콜론)을 구분자로 해서 앞에는 마운트할 볼륨명, 뒤에는 컨테이너 내의 경로를 명시해주면 된다.  

예를 들어 our-vol이라는 볼륨을 one 컨테이너의 /app 경로에 마운트 하는 것이다.  
` docker run -v our-vol:/app --name one busybox touch /app/test.txt`

`touch /app/test.txt` 커맨드를 실행했기 때문에  
test.txt파일이 our-vol 볼륨의 경로에도 남아있다.  


```
$ ls /var/lib/docker/volumes/our-vol/_data
test.txt
```


볼륨은 여러 컨테이너에 연결할 수 있다. 


참조:  
[도커 - 볼륨이란](http://pyrasis.com/book/DockerForTheReallyImpatient/Chapter06/04#:~:text=Docker%20%EB%8D%B0%EC%9D%B4%ED%84%B0%20%EB%B3%BC%EB%A5%A8%EC%9D%80%20%EB%8D%B0%EC%9D%B4%ED%84%B0,System%EC%97%90%20%EC%9D%98%ED%95%B4%20%EA%B4%80%EB%A6%AC%EB%90%A9%EB%8B%88%EB%8B%A4.)  
[도커 - 도커 컨테이너에 데이터 저장](https://www.daleseo.com/docker-volumes-bind-mounts/)  


참조:   
[docker 기본개념 - 호스트 ](https://khj93.tistory.com/entry/Docker-Docker-%EA%B0%9C%EB%85%90)  
[운영체제와 커널](https://goodmilktea.tistory.com/23)  
[도커 이미지 빌드와 도커 파일 기초](https://www.44bits.io/ko/post/building-docker-image-basic-commit-diff-and-dockerfile#%EB%93%A4%EC%96%B4%EA%B0%80%EB%A9%B0)  [

