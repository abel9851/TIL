# IP Address란

IP Address란 TCP/IP 네트워크 상에 있는 단말(컴퓨터, 프린터, 스마트폰 등)이나 네트워크 기기(라우터, 게이트웨이 등)를  
식별하기 위한 번호다.

현재 많이 사용되는 IPv4에서 IP어드레스는 2진수 32비트로 표현된다.  
사람으로서 2진수는 보기 힘듬으로 8비트 단위로 나눠서  
10진수로 변환해서 닷(.)으로 구분해서 표현한다. 

예시  
1100000011011010101100010110100 <- 2진수 32비트  

11000000 11011010 1011000 10110100 <- 8비트 단위  

192.218.88.180  <-10진수로 변환해서 닷(.)으로 구분 

- ## 도메인
도메인은 IP어드레ㅐ스를 인간이 이해하기 쉽도록 영어나 숫자, 기호를 사용하여 문자열로 변환한 것.

넓은 의미로 도메인명은 네트워크를 식별하는 문자열이고   
호스트명은 네트워크내의 컴퓨터를 식별하는 문자열이다.  
www.ipa.go.jp처럼 호스트명 + 도메인명인 형식은 FQDN(Fully Qulified Domain Name:완전수식 도메인명)이라고도 불린다.  

www(호스트명).ipa.go.jp(도메인명) 으로 자세하게 구분할 수 있지만 www.ipa.go.jp 통틀어서 도메인명 또는 호스트명이라고도 한다.  

- ## 글로벌 IP어드레스와 프라이빗 IP어드레스

전화의 외선번호가 글로벌 IP어드레스, 내선번호가 프라이빗 IP어드레스라고 생각하면 편하다.  

- ### 글로벌 IP어드레스
인터넷에 사용하는 IP가 글로벌 IP어드레스다. 
세계에서 유일하게 되도록 ICANN(The Internaet corporation for Assgined Names and Numbers)에 의해 관리된다.  
IP의 할당은 등록제공자(AWS - Route53)에게 위임한다.

- ### 프라이빗 IP어드레스
LAN등의 독립적인 네트워크에서 사용되는 IP어드레스가 프라이빗 IP어드레스다.  
네트워크 관리자가 범위내에서 자유롭게 할당할 수 있다.  


- ## DHCP
DHCP(Dynamic Host Configuration Protocol은 LAN에 접속된 단말에 대해서  
그 IP어드레스를 PC가 기동할때 등에서 자동설정하도록 사용하는 프로토콜이다. 
이것을 담당하는 것이 DHCP 서버다.  
DHCP서버는 등록해있는 IP어드레스 중에서 사용하고 있지 않은 IP어드레스를 동적으로 할당한다.  
즉, IP어드레스 관리에 걸리는 수고를 경감하는 것이 가능하다.

- ## 포트번호(port)

TCP나 UDP의 프로토콜처리에 있어서 통신상대의 어플리케이션을 식별하기 위해서 사용되는 번호를 포트번호라고 한다.  
TCP/IP 네트워크에서는 IP어드레스에 의해 통신상대의 컴퓨터를 특정하지만  
1대의 컴퓨터상에는 복수의 어플리케이션이 동작하고 있다.  
이 어플리케이션을 식별하는 번호가 0부터 65,535까지 있다.  
그 중에 0부터 1,023까지는 웰노운 포트라고 불리며, 특정 어플리케이션을 위해 예약되어 있다.  
포트 번호는 파이어월을 설정할때에도 필요하다.  

HTTP:80
FTP데이터전송:20
FTP데이터제어:21
DNS:53
SMTP:25
POP3:110
등이 있다. 


TCP:트랜스포트계층의 프로토콜 중 하나로, 통tls상대랑 통신이 되는지 확인한다.   
신뢰성이 높은 데이터 전송을 제공한다. Transmission Control Protocol

트랜스포트계층: 엔드 시스템 간(복수의 네트워크에 걸쳐있는 컴퓨터 사이)의 통신의 신뢰성을 확보한다.  


- ## IP어드레스의 클래스

2진수 8비트의 숫자표현은 0~255이고,
8비트로 표현할수 있는 개수는 256(2^8)개이다(255-0+1=256). 


IPv4에서는, IP어드레스는 32비트로 표현한다.  
거기서 32비트 중에 네트워크부와 호스트부로 나눠서  
어디 네트워크에 속하는지, 어느 호스트인지로 관리한다.  
호스트는 네트워크 상의 서버나 단말을 의미한다.  
32비트를 8비트 단위로, 네트워크부, 호스트부로 몇비트씩 구성하는지로 다음과 같이 나눈다.

A클래스는 네트워크부가 8베트, 호스트부가 24비트로 구성되어 있다.  
네트워크부의 맨 앞 비트는 0부터 시작한다. 10진수로는 1~127로 시작하는 IP어드레스다.  
즉, 비트로는 0xxxxxx1.8비트.8비트.8비트 이고 10진수로는 1~127.x.x.x 이다.  
(즉 네트워크부의 개수는 127개다. 왜냐하면 앞자리가 0이기 때문 2^7에서 0이 빠졌으므로 원래는 2^7=128이지만, 0을 빼면 127개)
호스트부는 32비트 중 나머지 24비트로 표현함으로 개수로 따지면 하나의 네트워크부(1~127중 하나)에 24비트씩이므로  
하나의 네트워크에는 최대 호스트 2^24-2대가 있을 수 있다. 왜 -2냐면, 호스트부가 전부 0인 어드레스는 호스트가 속해있는 네트워크 어드레스를 표현하고  
호스트부가 전부 1인 어드레스는 같은 네트워크에 속해있는 모든 호스트에 동일한 정보를 송신하기위해 사용되는 브로드캐스트 어드레스로 사용되기 때문이다.  

즉, 정리하자면  

A 클래스는 
2진수로는 00000001.00000000.00000000.00000000부터 01111111.11111111.11111111.11111111까지  
10진수로는 1.0.0.0.0부터 127.255.255.255까지를 의미한다.
A클래스는 1~127.x.x.x로 네트워크부는 127개  
예를 들어 1(1이라는 네트워크부).x.x.x에는 최대 2^24-2대의 호스트가 있을 수 있고  
1.0.0.0은 호스트가 속해있는 네트워크 어드레스를 표현하고
1.255.255.255는 네트워크에 속해있는 모든 호스트들에게 동일한 정보를 송신하기 위한 브로드캐스트 어드레스다.

네트워크부는 1.x.x.x부터 127.x.x.x까지 있음으로 최대 호스트 수는   
127 * (2^24-2=16,777,214=약 1600만대)= 2,130,706,178대=약 21억대이다.

B 클래스는  
네트워크부가 16비트, 호스트부가 16비트로, 네트워크 부의 앞자리는 10부터 시작한다.  
10xxxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ~ 10111111.11111111.11111111.11111111까지다.  
10진수로는 128.0.0.0.0 ~ 191.255.255.255까지고 네트워크부는 128.0 ~ 191.255 까지다.  
하나의 네트워크 당 식별되는 호스트는 최대 2^16-2(65,534=약 6만5천대)대다. 

C 클래스는  
네트워크부가 24비트, 호스트부가 8비트로, 네트워크부의 앞자리는 110부터 시작한다.  
110xxxxx.xxxxxxxx.xxxxxxxx.xxxxxxxx ~ 11011111.11111111.11111111.11111111까지다.  
10진수로는 192.0.0.0.0 ~ 233.255.255.255까지고 네트워크부는 192.0.0 ~ 233.255.255 까지다.  
하나의 네트워크 당 식별되는 호스트는 최대 2^8-2(254대)대이다.  

D 클래스는 1110으로 시작되며 특정한 통신을 할때 사용된다.  

그리고 프라이빗IP어드레스의 경우는 아래와 같다.  
A클래스: 10.0.0.0 ~ 10.255.255.255  
B클래스: 172.16.0.0 ~ 172.31.255.255  
C클래스: 192.168.0.0 ~ 192.168.255.255  


- ## 서브넷팅
호스트부의 정보를 분할하여 복수의, 보다작은 네트워크(서브넷)를 형성하는 것이 가능하다.  
이것을 서브넷팅이라고 부른다.  
네트워크부의 확장(호스트부로부터 빌림)하는 것으로, 32비트를 네트워크부와 서브네트워크부, 호스트부로 나눠서  
어떤 네트워크에 속하는지, 어떤 서브넷에 속하는지, 어떤 호스트인지를 관리한다.  

즉, A클래스에서   
127.0.0.0.0의 네트워크부에 속하는,  
127.1.0.0.0의 서브넷에 속하는,  
127.1.123.43라는 호스트  
라는 식으로 생각한다.  


- ## 서브넷마스크
서브넷팅을 사용하기 위해서는 IP어드레스의 비트수의 배분을 클래스의 구역을 넘어서  
유연하게 설정할 수 있어야한다.  
거기서 등장하는 것이 서브넷마스크라는 것이다.  
서브넷마스크는 IP어드레스를, 네트워크부와 호스트부로 구별하기 위해 사용하는 비트열이다.  
예를 들어 IP 어드레스가 192.168.1.19(클래스C의, 프라이빗IP어드레스), 서브넷마스크가 255.255.255.240인 경우를 생각해보자.  
IP 어드레스를 2진수로 변환하면 110부터 시작함으로 클래스C다.  
원래 클래스C는 네트워크부가 24비트, 호스트부가 8비트이기 때문에, 서브넷마스크는 255.255.255.0이지만  
(255.255.255.0인 서브넷마스크와 IP어드레스를 and연산하면 네트워크부만 남으므로 그 IP어드레스의 네트워크부가 어디인지 식별할 수 있다.)  
이번에는 서브넷마스크가 255.255.255.240이라고 해보자.  

여기서 네트워크부를 4비트확장(호스트부로부터 4비트 빌림)해서 서브넷부를 4비트 호스트부를 4비트로 표현한다.  
(255.255.255.240을 2진수로 표현하면, 11111111.11111111.11111111.11110000이다.)

너브넷부가 4비트임으로 2^4=16의 서브넷, 호스트부는 2^4-2=14대의 호스트로 식별할수 있다.  
즉 하나의 네트워크에 16개의 서브넷, 각 서브넷에 14대의 호스트가 관리되도록 하는 것이다.


예를 들어,  
192.168.1.19는 2진수로 표현하면 11000000.10101000.00000001.00010011이다.  

11000000.10101000.00000001.00010011에 서브넷마스크 255.255.255.240(11111111.11111111.11111111.11110000)을  
AND연산하면 192.168.1.16(11000000.10101000.00000001.00010000)인데 이것이  
192.168.1.19가 속한 서브네트워크 어드레스이다.
그 호스트가 속한, 네트워크 어드레스(서브네트워크 어드레스)를 찾을 수 있다.

정리하자면, 192.168.1.19는  
192.168.1.0이라는 네트워크에 속해있고,
그 네트워크 중에 192.168.1.16이라는 서브네트워크에 속해있는 14대의 호스트 중에 하나(192.168.1.19)라는 뜻이다.


참조: 
栢木先生の基本情報技術者教室  
[네트워크 기기](https://m.blog.naver.com/wlsdml1103/220936267002)  
[네트워크 계층](https://shlee0882.tistory.com/110)  
[네트워크 계층 데이터 전송 순서](https://inor.tistory.com/35)  
[네트워크 계층 데이터 전송 순서( 데이터링크계층의 Mac어드레스는 수신자의 인접한 노드(수신자 본인의 컴퓨터가 아님, 라우터같은거.)가 적혀있다. 그걸 계속 갱신)](https://hj-kwon.tistory.com/11)  
네트워크 기기와 데이터 전송 순서는 공부해두자.  